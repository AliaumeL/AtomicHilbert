% Little math macros
%!TEX root = ../atomic.sigconf.tex


\newcommand{\Grbs}{\kl{Gröbner bases}}
\newcommand{\Grb}{\kl{Gröbner basis}}

\NewDocumentCommand{\set}{ m }{\{ #1 \}}
\NewDocumentCommand{\setof}{ m m }{\{ #1 \mid #2 \}}
\NewDocumentCommand{\card}{ m }{\left| #1 \right|}
\NewDocumentCommand{\seqof}{ m O{n \in \N} }{\left( #1 \right)_{#2}}

\NewDocumentCommand{\defined}{ }{\triangleq}
\newcommand{\defiff}{\overset{\mathrm{def}}{\iff}}
\newcommand{\defeq}{\overset{\mathrm{def}}{=}}

\newcommand{\subfin}{\subset_{\text{fin}}}
\newcommand{\subseteqfin}{\subseteq_{\text{fin}}}

\NewDocumentCommand{\EXPTIME}{}{\ensuremath{\mathsf{EXPTIME}}}

\NewDocumentCommand{\range}{ O{1} m }{[#1, #2]}

% functions of all sorts (injective, partial, surjective)
\newcommand{\topartial}{\rightharpoonup}
\newcommand{\toinj}{\hookrightarrow}
\newcommand{\tosurj}{\twoheadrightarrow}
\newcommand{\tobij}{\stackrel{\simeq}{\longrightarrow}}


% Automate the creation of new orderings
% based on a given symbol.
% For instance,
% \NewDocumentOrdering{\pref}{\preceq}{\prec}
% will create the following commands:
% \prefleq and \preflt
% that will respectively expand to
% \mathrel{\kl[\pref]{\preceq}} and \mathrel{\kl[\pref]{\prec}}
\NewDocumentCommand{\NewDocumentOrdering}{ m m m }{
    \expandafter\newcommand\csname #1leq\endcsname{
        \mathrel{\kl[#1]{#2}}
    }
    \expandafter\newcommand\csname #1lt\endcsname{
        \mathrel{\kl[#1]{#3}}
    }
    \knowledge{#1}{notion}
}

% Order macros
\NewDocumentCommand{\upset}{ O{} m }{{\uparrow_{#1} #2}}
\NewDocumentCommand{\dwset}{ O{} m }{{\downarrow_{#1} #2}}


% Number theory
\NewDocumentCommand{\factorial}{ O{} m }{
    \if\relax\detokenize{#1}\relax
        #2!
    \else
        (#2)!
    \fi
}

\newcommand{\A}{\mathcal{A}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\G}{\mathcal{G}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\X}{\mathcal{X}}
\newcommand{\Y}{\mathcal{Y}}
\newcommand{\V}{\mathcal{V}}
\newcommand{\T}{\mathcal{T}}
\newcommand{\complex}{\mathbb{C}}

\newcommand{\ftwo}{\mathbb{F}_2}

\newcommand{\calZ}{\mathcal{Z}}
\newcommand{\calH}{\mathcal{H}}
\newcommand{\calQ}{\mathcal{Q}}
\newcommand{\calM}{\mathcal{M}}

% 
% Polynomial rings, monomials, and related macros
%
\newcommand{\poly}[2]{#1[#2]}
\newcommand{\mon}[2][]{\mathop{\kl[\mon]{\mathsf{Mon}_{#1}}}(#2)}
\knowledge{\mon}{notion}
\NewDocumentCommand{\monelt}{ O{m} }{\mathfrak{#1}}
\newcommand{\zeros}[1]{\mathbb{V}\left(#1\right)}

%
% orders on polynomials and monomials
%
\NewDocumentCommand{\divleq}{}{
  \mathrel{\kl[\divleq]{\sqsubseteq^{\mathrm{div}}}}
}
\knowledge{\divleq}{notion}

\NewDocumentCommand{\gdivleq}{ O{\group} }{
  \mathrel{\kl[\gdivleq]{\sqsubseteq^{\mathrm{div}}_{#1}}}
}
\knowledge{\gdivleq}{notion}

\NewDocumentCommand{\monord}{}{\sqsubseteq}

\NewDocumentOrdering{var}{\leq_\X}{<_\X}


\NewDocumentOrdering{revlex}{\sqsubseteq^{\mathsf{RevLex}}}{\sqsubset^{\mathsf{RevLex}}}
\NewDocumentOrdering{grevlex}{\sqsubseteq^{\mathsf{RevLex}}_\group}{\sqsubset^{\mathsf{RevLex}}_\group}
\NewDocumentOrdering{lex}{\sqsubseteq_{\mathsf{Lex}}}{\sqsubset_{\mathsf{Lex}}}
\NewDocumentOrdering{shortlex}{\sqsubseteq_{\mathsf{ShortLex}}}{\sqsubset_{\mathsf{ShortLex}}}

\NewDocumentOrdering{pmon}{\preceq}{\prec}
\NewDocumentCommand{\pmoneq}{}{\mathrel{\kl[pmon]{\equiv}}}


%
% coefficients, leading monomials, etc
%
\newcommand{\lc}[1][]{\mathop{\kl[\lc]{\mathsf{LC}_{#1}}}}
\knowledge{\lc}{notion}
\newcommand{\lt}[1][]{\mathop{\kl[\lt]{\mathsf{LT}_{#1}}}}
\knowledge{\lt}{notion}
\newcommand{\lm}[1][]{\mathop{\kl[\lm]{\mathsf{LM}_{#1}}}}
\knowledge{\lm}{notion}
\newcommand{\cm}[1][]{\mathop{\kl[\cm]{\mathsf{CM}_{#1}}}}
\knowledge{\cm}{notion}

\newcommand{\dom}{\mathop{\kl[\dom]{\mathsf{dom}}}}
\knowledge{\dom}{notion}

% the same ones, but for *decompositions*
\newcommand{\lmdec}[1][]{\mathop{\kl[\lmdec]{\mathsf{LM}_{#1}}}}
\knowledge{\lmdec}{notion}
\newcommand{\domdec}{\mathop{\kl[\domdec]{\mathsf{dom}}}}
\knowledge{\domdec}{notion}

% least common multiple
\newcommand{\lcm}{\mathop{\kl[\lcm]{\mathsf{LCM}}}}
\knowledge{\lcm}{notion}

%
% Ideal generation and related macros
%
\NewDocumentCommand{\idl}{O{I}}{\mathcal{#1}}
\NewDocumentCommand{\IdlGen}{ m }{\withkl{\kl[\IdlGen]}{
  \mathopen{\cmdkl{\langle}}
  #1
\mathclose{\cmdkl{\rangle}}}}
\knowledge{\IdlGen}{notion}

\NewDocumentCommand{\EqIdlGen}{ O{\group} m }{\withkl{\kl[\EqIdlGen]}{
  \mathopen{\cmdkl{\langle}}
  #2 
  \mathclose{\cmdkl{\rangle}}_{#1}}}
\knowledge{\EqIdlGen}{notion}

\newcommand{\rad}[1]{\sqrt{#1}}
%
% Group actions
%
\newcommand{\group}{\mathcal{G}}
\newcommand{\grp}[1][G]{\mathcal{#1}}
\newcommand{\actson}{\curvearrowright}
\NewDocumentCommand{\gelem}{ O{\pi} }{\mathgr{#1}}

\newcommand{\orbit}[2][]{\mathop{\kl[\orbit]{\mathsf{orbit}_{#1}}}(#2)}
\knowledge{\orbit}{notion}

\newcommand{\symgr}[1]{\mathbf{S}_{#1}}
\newcommand{\inc}[1]{\textsc{Inc}_{#1}}

%
% Sets of indeterminates, bases
%
\NewDocumentCommand{\Basis}{O{B}}{\mathcal{#1}}
\NewDocumentCommand{\LBasis}{O{B} m}{\mathcal{#1}_{#2}}

\NewDocumentCommand{\Indets}{}{\mathcal{X}}
\NewDocumentCommand{\IndetsCol}{}{\mathcal{Y}}
\NewDocumentCommand{\IndetsV}{ O{V} }{\mathcal{X}_{#1}}
\NewDocumentCommand{\idlZ}{}{\mathcal{Z}}

%
%  ORDINALS, PARTIAL ORDERINGS, AND THEIR OPERATIONS
%
\newcommand{\ordfin}[1]{\kl[\ordfin]{\mathgr{#1}}}
\newcommand{\om}{\kl[\om]{\omega}}
\newcommand{\ordplus}{\mathbin{\kl[\ordplus]{+}}}
\newcommand{\ordtimes}{\mathbin{\kl[\ordtimes]{\times}}}
\knowledge{\ordplus}{notion}
\knowledge{\ordtimes}{notion}
\knowledge{\ordfin}{notion}
\knowledge{\om}{notion}

%
% Buchberger related macros
%
\NewDocumentCommand{\toeucl}{m}{
  \mathrel{\kl[\toeucl]{\to_{#1}}}
}
\knowledge{\toeucl}{notion}

\NewDocumentCommand{\CancelPoly}{ m m }{\kl[\CancelPoly]{\mathsf{C}_{#1,#2}}}
\knowledge{\CancelPoly}{notion}

\newcommand{\spoly}[2]{\mathop{\kl[\spoly]{\mathsf{S}}}(#1,#2)}
\knowledge{\spoly}{notion}
\newcommand{\spolyset}{\mathop{\kl[\spolyset]{\mathsf{SSet}}}}
\knowledge{\spolyset}{notion}
\newcommand{\rem}[3][]{\kl[\rem]{\mathsf{Rem}^{#1}_{#2}(#3)}}
\knowledge{\rem}{notion}


%
% Coloring operations on sets of indeterminates
%
\NewDocumentCommand{\forgetCol}{}{\mathop{\kl[\forgetCol]{\mathsf{forget}}}}
\knowledge{\forgetCol}{notion}
\NewDocumentCommand{\colorWith}{ m }{\mathop{\kl[\colorWith]{\mathsf{col}_{#1}}}}
\knowledge{\colorWith}{notion}
\NewDocumentCommand{\freeColor}{ }{\mathop{\kl[\freeColor]{\mathsf{freecol}}}}
\knowledge{\freeColor}{notion}


%
% word encodings and undecidability
%
\newcommand{\wenc}[1]{\withkl{\kl[\wenc]}{\mathopen{\cmdkl{\llbracket}} #1 \mathclose{\cmdkl{\rrbracket}}}}
\knowledge{\wenc}{notion}

%
% orbit-finite system of equations
%

\newcommand{\lin}{\textsc{Lin}}

%
% Garbage macros
%

\newcommand{\aut}[2][]{\mathsf{Aut}_{#1}{(#2)}}
\newcommand{\perm}[1]{\mathsf{Perm}(#1)}
\newcommand{\otu}[2]{#1^{(#2)}}
\newcommand{\radoG}{\mathbb{R}_{\mathsf{Rado}}}
\newcommand{\radoV}{\mathbb{V}_{\mathsf{Rado}}}
\newcommand{\radoE}{\mathbb{E}_{\mathsf{Rado}}}
\newcommand{\cycleSet}[1][]{\mathsf{Cycles}_{#1}}



%%%
% INDETERMINATE STRUCTURES
% AND THEIR GROUP ACTIONS
%%%
\newcommand{\EqualityAtoms}{\kl[\EqualityAtoms]{\mathcal{A}}}
\knowledge{\EqualityAtoms}{notion}

\newcommand{\OrderAtoms}{\kl[\OrderAtoms]{\mathcal{Q}}}
\knowledge{\OrderAtoms}{notion}

\newcommand{\RadoAtoms}{\kl[\RadoAtoms]{\mathcal{R}}}
\knowledge{\RadoAtoms}{notion}

\newcommand{\BitVectorAtoms}{\kl[\BitVectorAtoms]{\mathcal{V}}}
\knowledge{\BitVectorAtoms}{notion}

\newcommand{\TreeAtoms}{\kl[\TreeAtoms]{\mathcal{T}}}
\knowledge{\TreeAtoms}{notion}
\newcommand{\rt}{\textsc{root}}


\newcommand{\lexGroupAction}{\mathbin{\kl[\lexGroupAction]{\otimes}}}
\knowledge{\lexGroupAction}{notion}
\newcommand{\reduct}[1]{\trianglelefteq^{#1}}
