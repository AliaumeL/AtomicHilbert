%!TEX root = ../atomic.asmart.tex
%
\section{Colourful ideas}
%
\begin{assumption}\label{assume:mon mon wqo}
$(\mon{X}{\times}\mon{X},\gdivleq)$ is a WQO.
\end{assumption}
%
For this section, let $\col \defined \{0,1\}$ and $\paint{\X} \defined \X{\times}\col$.
The order $<$ on $\X$ is extended to $\paint{\X}$ as
\[
(x,c) < (y,d) \quad\iff\quad
\text{$c < d$, or $c = d$ and $x < y$.}
\]
%
\begin{definition}
Define $\forget : \poly{\K}{\paint{\X}} \to \poly{\K}{\X}$ as the extension of the map $(x,c) \mapsto x$ for $x\in\X$ and $c\in\col$.
\end{definition}
%
%\begin{definition}
%A polynomial $f\in\poly{\K}{\paint{\X}}$ is called \kl{consistently coloured} if
%\[
%\var(f) \cap \{(x,0),(x,1)\} \subsetneq \{(x,0),(x,1)\}
%\]
%for every $x\in\X$.
%Similarly, a $S$-polynomial $\spoly{f}{g} \in \poly{\K}{\paint{\X}}$ is called \kl{consistently coloured} if
%\[
%(\var(f)\cup\var(g)) \cap \{(x,0),(x,1)\} \subsetneq \{(x,0),(x,1)\}
%\]
%for every $x\in\X$.
%\end{definition}
%
\arka{How do I add new environments?}
%
\begin{definition}
For a set $A$, let $\symgr{A}$ denote the group of bijections of $A$.
\end{definition}
%
\begin{definition}
Let $\paint{\group}$ denote the \kl{free group} generated by $\group$ and $\symgr{\col}$.
\end{definition}
%
The actions of $\group$ on $\X$ and $\symgr{\col}$ is extended to an action of $\paint{\group}$ of $\paint{\X}$ in the obvious way.
%
\arka{Expand on the definitions and add examples}
%
%\begin{lemma}
%For any \kl{consistently coloured} $f\in\poly{\K}{\X}$ and $\pi\in\paint{\group}$,
%$\pi(f)$ is also \kl{consistently coloured}.
%\end{lemma}
%
Let $\Basis\subseteq\poly{\K}{\X}$ be an orbit-finite set.
Let $\paint{\Basis} = \forget^{-1}(\Basis)$.
%
\begin{lemma}
The set $\paint{\Basis}$ is $\paint{\group}$-equivariant.
\end{lemma}
%
\begin{lemma}
Under \Cref{assume:mon mon wqo},
\Cref{alg:weakgb} terminates on the input $\paint{\Basis}$.
\end{lemma}
%
Let $\paint{\Basis[D]}$ be the output of \Cref{alg:weakgb} on the input $\paint{\Basis}$.
Let $\Basis[D] = \forget(\paint{\Basis[D]})$.
%
\begin{theorem}\label{lem:strong buch}
For every $f\in\IdlGen{\Basis[D]}$,
$f \in \IdlGen{\Basis[D]\cap\var(f)}$.
\end{theorem}
%
\begin{corollary}\label{cor:strong buch}
The set $\Basis[D]$ is an orbit-finite \gr{} basis of $\IdlGen{\Basis}$.
\end{corollary}
%
\subsection{Proof of \Cref{lem:strong buch}}
%
Clearly $\Basis[B] \subseteq \Basis[D] \subseteq \IdlGen{\Basis}$.
Hence $\IdlGen{\Basis[D]} = \IdlGen{\Basis}$.

Pick $f\in\IdlGen{\Basis[D]}$.
A \kl{representation} of $f$ using $\Basis[D]$ is a finite set of tuples
\[
R \subseteq \K\times\mon{\X}\times\Basis[D]
\]
such that
\[
f = \sum_{(r,p,h)\in R} r\cdot p\cdot h \ .
\]
For a representation $R$, define
\[
\var(R) = \bigcup_{(r,p,h)\in R} \var(p)\cup\var(h)
\]
Define $\repaint{R} : \X \to \paint{\X}$ as
\[
\repaint{R}(x) =
\begin{cases}
(x,0) & \text{if }x\in\var(f) \\
(x,1) & \text{otherwise.}
\end{cases}
\]
%
Define $\paint{R}$ to be the the tuple
\[
\setof{(r,\repaint{R}(p),\repaint{R}(h))}{(r,p,h)\in R} \ .
\]
The definition of $\var$ is extended to $\var(\paint{R})$ in the obvious way.
The leading monomial of $\paint{R}$ is defined as:
\[
\lm(\paint{R}) \defined
\max_{(r,p,h)\in R} \lm(p\cdot h) \ .
\]

Define an order $\repL$ on representations of $f$ as
\[
R \repL R'
\quad\iff\quad
\var(\paint{R})\subseteq\var(\paint{R'})
\text{ and }
\lm(\paint{R}) \revlexeq \lm(\paint{R'})
\]
%
\arka{Maybe define a ``claim'' environment?}
%
\begin{lemma}
The order $\repL$ is well founded.
\end{lemma}
%
\begin{proof}
\todo[inline]{TODO}
\end{proof}
%
Let $R$ be a representation of $f$ using $H$ which is minimal w.r.t.\ $\repL$.
We prove that $\var(\paint{R}) \subseteq \setof{(x,0)}{x\in\X}$.
Since $\var(\paint{R}) \cap \setof{(x,0)}{x\in\X} \subseteq \var(f)$ by definition,
this finishes the proof of \Cref{lem:strong buch}.
%
\qed
%