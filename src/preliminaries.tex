%!TEX root = ../atomic.asmart.tex
% LTeX: language=en
\section{Preliminaries}
\label{sec:preliminaries}

\paragraph{Partial orders, ordinals, well-founded sets, and well-quasi-ordered
sets.} \AP We assume basic familiarity with partial orders, well-founded sets,
and ordinals. We will use the notation $\intro*\om$ for the first infinite
ordinal (that is, $(\N, \leq)$), and write $X \intro*\ordplus Y$ for the
lexicographic sum of two partial orders $X$ and $Y$. We will also use the usual
notations for finite ordinals, writing $\intro*\ordfin{n}$ for the finite
ordinal of size $n$. For instance, $\om \ordplus \ordfin{1}$ is the total order
$\N \uplus \set{+\infty}$, where $+\infty$ is the new largest element. Finally,
we will also use the ordinal $\om^2$, that is obtained as pairs of elements of
$\om$, ordered lexicographically (i.e., a linearisaton of the Cartesian product
$\N \times \N$ equipped with the product ordering).

\AP In order to guarantee the termination of the algorithms presented in this
paper, a key ingredient will be the notion of \intro{well-quasi-ordering}
(WQO), that are sets $(X, \leq)$ such that every infinite sequence
$\seqof{x_i}[i \in \N]$ of elements of $X$ contains a pair $i < j$ such that
$x_i \leq x_j$. Examples of \kl{well-quasi-orderings} include finite sets with
any ordering, or $\N \times \N$ with the product ordering. We refer the reader
to \cite{SCSC12} for a comprehensive introduction to \kl{well-quasi-orderings}
and their applications in computer science.

\paragraph*{Polynomials, monomials, divisibility.} \AP 
We assume basic familiarity with the theory of
commutative algebra, and polynomials. We will use the notation $\poly{\K}{\Indets}$
for the ring of polynomials with coefficients from a field $\K$ and
indeterminates/variables from a set $\Indets$, and $\mon{\Indets}$ for the set of
monomials in $\poly{\K}{\Indets}$. Letters $p,q,r$ are used to denote polynomials,
$\monelt,\monelt[n]$ are used to denote monomials, and $a,b,\alpha,\beta$ are
used to denote coefficients in $\K$.

A classical example of a \kl{WQO} is the set of monomials $\mon{\Indets}$,
endowed with the \kl{divisibility} relation $\intro*\divleq$ whenever $\Indets$
is finite. We recall that a monomial $\monelt[m]$ \intro{divides} a monomial
$\monelt[n]$ if there exists a monomial $\monelt[l]$ such that $\monelt[m]
\times \monelt[l] = \monelt[n]$. In this case, we write $\monelt[m]
\reintro*\divleq \monelt[n]$. Note that monomials can be seen as functions from
$\Indets$ to $\N$ having a finite support, and that the \kl{divisibility}
relation can be extended to monomials that are functions from $\Indets$ to
$(Y,\leq)$, where $Y$ is any partially ordered set. In this case, we write
$\monelt[m] \divleq \monelt[n]$ if for every $x \in \Indets$, we have
$\monelt[m](x) \leq \monelt[n](x)$. We will write $\intro*\mon[\om \ordplus
1]{\Indets}$ (resp. $\mon[\om^2]{\Indets}$) for the set of monomials that are
functions from $\Indets$ to $\om \ordplus \ordfin{1}$ (resp. $\om^2$).

\AP Unless otherwise specified, we will assume that the set of indeterminates
$\Indets$ comes equipped with a total ordering $\varleq$. Using this order, we
define the \intro{reverse lexicographic} (revlex) ordering on monomials as
follows: $\monelt[n] \intro*\revlexlt \monelt[m]$ if there exists an
indeterminate $x \in \Indets$ such that $\monelt[n](x) < \monelt[m](x)$, and such
that for every $y \in \Indets$, if $x \varlt y$ then $\monelt[n](y) =
\monelt[m](y)$. Remark that if $\monelt[n] \revlexleq \monelt[m]$, then in
particular $\monelt[n] \divleq \monelt[m]$. 

\AP We can now use the \kl{revlex} ordering to identify particular elements in
a given polynomial. Namely, for a polynomial $p \in \poly{\K}{\X}$, we define
the \intro{leading monomial} $\intro*\lm(p)$ of $p$ as the largest monomial
appearing in $p$ with respect to the \kl{revlex} ordering, and the
\intro{leading coefficient} $\intro*\lc(p)$ of $p$ as the coefficient of
$\lm(p)$ in $p$. We can then define the \intro{leading term} $\intro*\lt(p)$ of
$p$ as the product of its \kl{leading monomial} and its \kl{leading
coefficient}, and the \intro{characteristic monomial} $\intro*\cm(p)$ of $p$ as
the product of its \kl{leading monomial} and all the indeterminates appearing
in $p$. We also define the \intro(monomial){domain} of $\monelt[m]$ as the set
$\intro*\dom(\monelt[m])$ of indeterminates $x \in \X$ such that $\monelt[m](x) \neq
0$. Because the coefficients and monomial in question are highly dependent on
the ordering $\varleq$, we allow ourselves to write $\lm[\Indets](p)$ to
highlight the precise ordered set of variables that was used to compute the
\kl{leading monomial} of $p$.


\paragraph{Ideals, and Gröbner Bases.} \AP An \intro{ideal} $\idl$ of
$\poly{\K}{\X}$ is a non-empty subset of $\poly{\K}{\X}$ that is closed under
addition and multiplication by elements of $\poly{\K}{\X}$. Given a set $H
\subseteq \poly{\K}{\X}$, we denote by $\intro*\IdlGen{H}$ the ideal generated
by $H$, i.e. the smallest ideal that contains $H$. The \intro{ideal membership
problem} is the following decision problem: given a polynomial $p \in
\poly{\K}{\X}$ and a set of polynomials $H \subseteq \poly{\K}{\X}$, decide
whether $p$ belongs to the ideal $\IdlGen{H}$ generated by $H$. We know that
this problem is decidable when $\X$ is finite, and that it is even
$\EXPTIME$-complete \cite{MAME82}. The classical approach to the \kl{ideal
membership problem} is to use the \kl{Gröbner basis} theory that was developed
in the 70s by Buchberger~\cite{BUCH76}. 
A set $\Basis$ of polynomials is called a \intro{Gröbner basis} of
an ideal $\idl$ if, $\IdlGen{\Basis} = \idl$ and for every polynomial $p \in
\idl$, there exists a polynomial $q \in \Basis$ such that $\lm[\Indets](q)
\divleq \lm[\Indets](p)$.

Given a \kl{Gröbner basis} $\Basis$ of an ideal $\idl$, and a polynomial $p$,
it suffices to iteratively reduce the \kl{leading monomial} of $p$ by
subtracting multiples of elements in $\Basis$, until one cannot apply any
reductions. If the result is $0$, then $p$ belongs to $\idl$, and otherwise it
does not. 



\paragraph{Group actions, equivariance, and orbit finite sets.}  \AP A
\intro{group} $\group$ is a set equipped with a binary operation that is
associative, has an identity element and has inverses. In our setting, we are
interested in infinite sets $\X$ of indeterminates that is equipped with a
\intro{group action} $\group \actson \X$. This means that for each $\gelem \in
\group$, we have a bijection $\X \tobij \X$ that we denote by $x \mapsto \gelem
\cdot x$. A set $S \subseteq \X$ is \intro{equivariant} under the action of
$\group$ if for all $\gelem \in \group$ and $x \in S$, we have $\gelem \cdot x
\in S$. We give in \cref{ex:idl-equiv} an example and a non-example
of \kl{equivariant ideals}.

\begin{example}
    \label{ex:idl-equiv}
    Let $\Indets$ be any infinite set, and $\group$ be the 
    group of all bijections of $\Indets$. 
    Then the set $S_0 \subset \poly{\K}{\Indets}$ of all polynomials 
    whose set of coefficients sums to $0$ is an equivariant ideal.
    Conversely, the set of all polynomials that are multiple
    of $x \in X$ is an \kl{ideal} that is not \kl{equivariant}.
\end{example}
\begin{proof}
    Let $p,q\in S_0$, and $r \in \poly{\K}{\Indets}$.
    Then, $p \times r + q$ is in $S_0$. Remark that 
    $p,r$ and $q$ belong to a subset $\poly{\K}{\Indets}$ of the 
    polynomials that uses only finitely many indeterminates.
    In this subset, the sum of all coefficients is obtained
    by applying the polynomials to the value $1$ for every indeterminate
    $y \in \Indets$. We conclude that
    $(p \times r + q)(1,\dots, 1) 
    = p(1,\dots,1) \times r(1,\dots,1) + q(1,\dots,1)
    = 0 \times r(1, \dots, 1) + 0 = 0$, hence that
    $p \times r + q$ belongs to $S_0$. 
    Because $0$ is in $S_0$, we conclude that $S_0$ is an \kl{ideal}.
    Furthermore, if $\gelem \in \group$ and $p \in S_0$, then
    the sum of the coefficients $\gelem \cdot p$ is exactly
    the sum of the coefficients of $p$, hence is $0$ too.
    This shows that $S_0$ is \kl(ideal){equivariant}.

    It is clear that all multiples of a given polynomial $x \in \Indets$
    is an ideal of $\poly{\K}{\Indets}$. This is not an \kl{equivariant ideal}:
    take any bijection $\gelem \in \group$ that does not map $x$ to $x$ (it
    exists because $\Indets$ is infinite and $\group$ is all permutations),
    then $\gelem \cdot x$ is not a multiple of $x$, and therefore does 
    not belong to the ideal.
\end{proof}

\AP An \kl{equivariant set} is said to be \intro{orbit finite} if it is the
union of finitely many \intro{orbits} under the action of $\group$. We denote
$\intro*\orbit[\group]{E}$ for the set of all elements $\gelem \cdot x$ for
$\gelem \in \group$ and $x \in E$. Equivalently, an \reintro{orbit finite set}
is a set of the form $\orbit[\group]{E}$ for some finite set $E$.

\todo[inline]{add example of orbit finite / non orbit finite}

\AP A group action $\group \actson \X$ is said to be \intro(ord){compatible} with an
ordering $\leq$ on $\X$ if for all $\gelem \in \group$ and $x,y \in \X$, we
have $x \leq y$ if and only if $\gelem \cdot x \leq \gelem \cdot y$. Let us
point out that in this case, $\revlexleq$ is also \kl{compatible} with the
action of $\group$ on $\mon{\X}$, i.e. for all $\gelem \in \group$ and
monomials $\monelt[m], \monelt[n] \in \mon{\X}$, we have
$\monelt[m] \revlexleq \monelt[n]$ if and only if $\gelem \cdot \monelt[m]
\revlexleq \gelem \cdot \monelt[n]$.

\AP A function $f \colon X \to Y$ between two sets $X$ and $Y$ equipped with
actions $\group \actson X$ and $\group \actson Y$ is said to be
\intro(func){equivariant} if for all $\gelem \in \group$ and $x \in X$, we have
$f(\gelem \cdot x) = \gelem \cdot f(x)$. For instance, the
\kl(monomial){domain} of a monomial is an \kl{equivariant function} if $\gelem
\in \group$, then $\gelem \cdot \dom(\monelt[m]) = \dom(\gelem \cdot
\monelt[m])$. Similarly, the \kl{leading monomial} is an \kl{equivariant
function}, provided that the ordering $\varleq$ on $\Indets$ is \kl{compatible} with
the action of $\group$ on $\Indets$.


\AP We say that the action is \intro{effectively oligomorphic} if for every $n
\in \N$ and every \kl{orbit finite set} $E \subseteq \Indets$, the set $E^n$ is
\kl{orbit finite} under the action of $\group$ on $\Indets^n$. Furthermore, we
ask that, for all $n \in \N$, there exists an algorithm that decides whether
two elements $\vec{x}, \vec{y} \in \Indets^n$ are in the same orbit under the
action of $\group$ on $\Indets^n$.

\todo[inline]{add a reference to the atom book
   + add examples of effective oligomorphic / non effective oligomorphic}

\todo[inline]{Prove that the image of an orbit finite set under 
  an equivariant function is orbit finite
  if everything is \kl{effectively oligomorphic}.}

\paragraph{Equivariant Gröbner bases.} \AP We know from \cite{GHOLAS24} that a
necessary condition for the \kl{equivariant Hilbert basis property} to hold is
that the set  $\mon{\X}$  of monomials is a \kl{well-quasi-ordering} when
endowed with the \intro{divisibility up-to $\group$} relation
($\intro*\gdivleq$), which is defined as follows: for $\monelt_1, \monelt_2 \in
\mon{\X}$, we write $\monelt_1 \gdivleq \monelt_2$ if there exists $\gelem \in
\group$ such that $\monelt_1$ \kl{divides} $\gelem \cdot \monelt_2$. This
relation also extends to monomials that are functions from $\Indets$ to
$(Y,\leq)$ with finite support, where $Y$ is any partially ordered set.

\AP We say that a set $\Basis \subseteq \poly{\K}{\X}$ is an \intro{equivariant
Gröbner basis} of an equivariant ideal $\idl$ if $\Basis$ is \kl{equivariant},
$\IdlGen{\Basis} = \idl$, and for every polynomial $p \in \idl$, there exists
$q \in \Basis$ such that $\lm[\Indets](q) \gdivleq \lm[\Indets](p)$ and
$\dom(q) \subseteq \dom(p)$, following the definition of \cite{GHOLAS24}.

Beware that even in the case of a finite set of variables, a \kl{Gröbner basis}
is not necessarily an \kl{equivariant Gröbner basis}, because of the
\kl(polynomial){domain} condition. However, every \kl{equivariant Gröbner
basis} is a \kl{Gröbner basis}.

\todo[inline]{add an example of non equivariant Gröbner basis in the finite case}
