%!TEX root = ../atomic.asmart.tex
% LTeX: language=en
\section{Preliminaries}
\label{sec:preliminaries}

In order to explain these requirements and
how they relate to previous works, let us first recall that a set $(X, \leq)$ is a
\intro{well-quasi-ordering} (WQO) if every infinite sequence $\seqof{x_i}[i \in
\N]$ of elements of $X$ contains a pair $i < j$ such that $x_i \leq x_j$.
We know from \cite{GHOLAS24} that a
necessary condition for the \kl{equivariant Hilbert basis property} to hold is
that the set  $\mon{\X}$  of monomials is a
\kl{well-quasi-ordering} when endowed with the \intro{divisibility up-to
$\group$} relation ($\intro*\gdivleq$), which is defined as follows: for
$\monelt_1, \monelt_2 \in \mon{\X}$, we write $\monelt_1 \gdivleq
\monelt_2$ if there exists $\gelem \in \group$ such that $\monelt_1$ \kl{divides}
$\gelem \cdot \monelt_2$.
Let us recall that a monomial $\monelt[m]$ \intro{divides} a monomial $\monelt[n]$ if
there exists a monomial $\monelt[k]$ such that $\monelt[m] \times \monelt[k] = \monelt[n]$.


\AP Notice that one can extend the
notion of monomials, that are functions from $\X$ to $\N$ having a finite
support, to the case of $\mon[\alpha]{\X}$, where $\alpha$ is any partially
ordered set. With this convention, $\mon[\omega]{\X} = \mon{\X}$. Note that
\kl{divisibility} extends to $\mon[\alpha]{\X}$ naturally, and that we can therefore
ask whether $(\mon[\alpha]{\X}, \gdivleq)$ is a \kl{WQO}. A well-known
result from Dickson states that in the case of finite sets of variables,
$(\mon[\alpha]{\X}, \gdivleq)$ is a \kl{WQO} if and only if $\alpha$ is
itself a \kl{WQO}, hence our approach will not lose any generality in the finite case \cite{SCSC12}.


\AP In order to devise a decision procedure, we also will assume that basic
operations on the set of indeterminates and on the group action are decidable.
Namely, we will assume that the action of $\group$ on $\X$ is
\intro{effectively oligomorphic}, which means that: for every two tuples
$(x_1,\dots,x_n), (y_1,\dots,y_n)\in \X^n$, one can decide whether they are in
the same $\group$-orbit, i.e., whether there exists $\gelem \in \group$ such
that $\gelem \cdot x_i = y_i$ for all $i \leq n$ ; And that for every finite
subset $S \subfin \X$ and every $n \in \N$, one can compute a finite set of
representatives for the $\FixG{S}$-orbits of $\X^n$, where $\intro*\FixG{S}$ is the
subgroup of $\group$ that fixes the elements of $S$.

\AP We will also assume that there exists a total ordering $\leq$ on $\X$ that
is \kl{compatible} with the action of $\group$, i.e., if $x \leq y$, but
crucially, we do not assume that $\leq$ is well-founded. Again, to devise our algorithm
we will assume that this ordering is \intro(ordering){effective}, i.e. To compute with this
we will assume that one can decide whether $x \leq y$ for all $x,y
\in \X$. The first and main result of this paper is the following:



\AP
We then build on this result to compute so-called 
\kl{equivariant Gröbner bases} for equivariant ideals.
Note that already in the case of finite sets of variables, there are 
multiple (equivalent) definitions of \kl{Gröbner bases}, and will defer 
their presentation to our preliminaries section.
In the case of infinite sets of variables, we define an
\intro{equivariant Gröbner basis} as a finite set of generators $\Basis$ of
an \kl{equivariant ideal} $\idl$ such that, for every finite set $S \subfin \X$,
the set $\orbit{\Basis} \cap \poly{\K}{S}$ is a \kl{Gröbner basis} of the \kl{ideal} $\idl \cap
\poly{\K}{S}$.
In particular, if $\Basis$ is an \kl{equivariant Gröbner basis}, then
the following holds:
\begin{equation}
  \forall S \subfin \X,
  \EqIdlGen{H} \cap \poly{\K}{S} = \IdlGen{\orbit{\Basis} \cap \poly{\K}{S}}
  \quad .
\end{equation}
In particular, having an \kl{equivariant Gröbner basis} allows one to efficiently compute membership
queries, as they reduce to the case of finite sets of variables, and that
a \kl{Gröbner basis} of the corresponding (non-equivariant) ideal can be computed 
easily from $\Basis$, as a finite set of representatives of
$\orbit{\Basis} \cap \poly{\K}{S}$.




Note that the requirement that $(\mon[\omega + \omega]{\X}, \gdivleq)$ is a
\kl{WQO} is a generalisation of the requirement that $(\mon[\omega+1]{\X},
\gdivleq)$ is a \kl{WQO} in the previous \cref{thm:decide-equiv-ideal-mem}.



\paragraph{Orders.}
We assume basic familiarity with partial orders and ordinals.
In particular, we will use the notation $\intro*\om$ 
for the first infinite ordinal (that is, $(\N, \leq)$), and
write $X \intro*\ordplus Y$ for the lexicographic sum of two
partial orders $X$ and $Y$. We will also use the usual 
notations for finite ordinals, writing
$\intro*\ordfin{n}$ for the finite ordinal of size $n$.
For instance, $\om \ordplus \ordfin{1}$ is the 
total order $\N \uplus \set{+\infty}$, where $+\infty$ is a (new) 
largest element.


\paragraph{Group actions and equivariant ideals.}  A \intro{group}
$\group$ is a set equipped with a binary operation that is associative, has an
identity element and has inverses. In our setting, we are interested in
infinite sets $\X$ of indeterminates that is equipped with a \intro{group
action} $\group \actson \X$. This means that for each $g \in \group$,
we have a bijection $\X \tobij \X$ that we denote by $x \mapsto g \cdot x$. A
set $S \subseteq \X$ is \intro{equivariant} under the action of $\group$ if for
all $g \in \group$ and $x \in S$, we have $g \cdot x \in S$.
We give in \cref{ex:idl-equiv} an example and a
non-example of \kl{equivariant} \kl{ideals}.
Given a set $H$ of generators,
the \kl{equivariant ideal generated by} $H$
can alternatively be decribed
as 
 the set of all polynomials that can be written as
follows: $\,\sum_{i=1}^n q_i (\gelem_i \cdot s_i)$ for some $n \in \N$, $\gelem_i
\in \group$, $q_i \in \mon{\X}$, and $s_i \in H$.


\begin{example}
    \label{ex:idl-equiv}
    Let $\X$ be any infinite set, and $\group$ be the 
    group of all bijections of $\X$. 
    Then the set $S_0 \subset \poly{\K}{\X}$ of all polynomials 
    whose set of coefficients sums to $0$ is an equivariant ideal.
    Conversely, the set of all polynomials that are multiple
    of $x \in X$ is an \kl{ideal} that is not \kl{equivariant}.
\end{example}
\begin{proof}
    Let $p,q\in S_0$, and $r \in \poly{\K}{\X}$.
    Then, $p \times r + q$ is in $S_0$. Remark that 
    $p,r$ and $q$ belong to a subset $\poly{\K}{\Y}$ of the 
    polynomials that uses only finitely many indeterminates.
    In this subset, the sum of all coefficients is obtained
    by applying the polynomials to the value $1$ for every indeterminate
    $y \in \Y$. We conclude that
    $(p \times r + q)(1,\dots, 1) 
    = p(1,\dots,1) \times r(1,\dots,1) + q(1,\dots,1)
    = 0 \times r(1, \dots, 1) + 0 = 0$, hence that
    $p \times r + q$ belongs to $S_0$. 
    Because $0$ is in $S_0$, we conclude that $S_0$ is an \kl{ideal}.
    Furthermore, if $g \in \group$ and $p \in S_0$, then
    the sum of the coefficients $g \cdot p$ is exactly
    the sum of the coefficients of $p$, hence is $0$ too.
    This shows that $S_0$ is \kl(ideal){equivariant}.

    It is clear that all multiples of a given polynomial $x \in \X$
    is an ideal of $\poly{\K}{\X}$. This is not an \kl{equivariant ideal}:
    take any bijection $g \in \group$ that does not map $x$ to $x$ (it
    exists because $\X$ is infinite and $\group$ is all permutations),
    then $g \cdot x$ is not a multiple of $x$, and therefore does 
    not belong to the ideal.
\end{proof}

As explained in the introduction, we will assume that the set of indeterminates
is equipped with an \kl{effective linear order} $\leq$, that is \intro{compatible with
the group action}, that is, such that for all $\gelem
\in \group$ and $x,y \in \X$, we have $x \leq y \iff \gelem \cdot x \leq \gelem \cdot y$.



\paragraph{Gröbner Bases.} \AP
Let us now give a brief overview of the theory of Gröbner bases, and their 
adaptations in the equivariant setting. In particular, the following 
will be crucial to understand the algorithm we will present in \cref{sec:algorithm}.

In order to obtain a decision procedure for the ideal membership problem, a natural approach
is to generalise the Euclidean division to the case of polynomials with multiple
indeterminates. Namely, 
we write $p \to_{q} r$ if there exists $\monelt \in \mon{\X}$ and $a \in \K$ such that
\begin{equation}
    \label{eq:euclidian}
    p = a  \monelt q  + r
\end{equation}
Based on this rewriting relation, 
it is clear that 
$p \to_{H}^* 0$ if and only if
$p \in \IdlGen{H}$. To turn this remark into a decision procedure, we can
to orient the reduction relation to make it \intro{terminating}, i.e. such that
every rewriting sequence $x_1 \to x_2 \to \dots$ is finite.
The simplest way to do so is to select a \kl{well-ordering} $\preceq$ on polynomials
and to orient the rewriting relation by $p \to_{q,\preceq} r$ if and only if
there exists
$\monelt \in \mon{\X}$ and $a \in \K$ such that
\begin{equation}
    \label{eq:euclidian-ord}
    p = a  \monelt q  + r \text{ and } r \preceq p
\end{equation}
If the relation is \intro{confluent}, i.e. if
for all $p \to_{q}^* r_1$ and $p \to_{q}^* r_2$, there exists $r_3$ such that
$r_1 \to_{q}^* r_3$ and $r_2 \to_{q}^* r_3$, then we obtain a simple decision
procdure for the ideal membership problem: we can compute the normal form of $p$ with
respect to $H$, by applying reductions of $\to_{H,\preceq}$ until no transitions can be taken, and check if it is equal to $0$.


\AP
Abstractly, we can define a \intro{Gröbner basis} of an ideal $\idl$, with respect to an
ordering $\preceq$ on polynomials, as a finite 
set of polynomials $\Basis$ such that 
$\to_{\Basis,\preceq}$ is \kl{terminating} and \kl{confluent}, and such that
for all $p \in \poly{\K}{\X}$,
$p \to_{\Basis,\preceq}^* 0$ if and only if $p \in \idl$.

\AP In practice, the algorithm to compute \kl{Gröbner bases} will be similar to
the Knuth-Bendix completion algorithm for term rewriting systems
\cite{KNBEND70}, and will be based on orderings on polynomials that interact in
a specific way with the notion of \kl{division}. Indeed, there is a natural
(partial) ordering on monomials: the \kl{divisibility ordering}. To lift this
ordering to polynomials, one uses the notion of \intro{monomial orderings}
$\monord$ that are: total, refining the divisibility ordering, and such that the
product operation on monomials is monotone.
Classical examples of \kl{monomial orderings} are the 
\kl{lexicographic ordering} $\lexleq$ and the \kl{reverse lexicographic ordering} $\revlexleq$, 
that are obtained by considesing a total ordering $<$ on the set of indeterminates
$\Indets$ to linearise the \kl{divisibility ordering}, and are respectively defined as
\begin{align*}
  \monelt \intro*\revlexlt \monelt[n] & \iff \exists X \in \Indets, \monelt(X) < \monelt[n](Y) 
    \land
    \forall Y > X, \monelt(Y) = \monelt[n](Y) \\
    \monelt \intro*\lexlt \monelt[n] & \iff \exists X \in \Indets, \monelt(X) < \monelt[n](Y)
    \land
    \forall Y < X, \monelt(Y) = \monelt[n](Y) \\
  \end{align*}

\begin{example}
  Let $\X = \set{x_1, x_2, x_3}$ and assume that $x_1 < x_2 < x_3$.
  A monomial $\monelt$ is uniquely defined by its exponents $(e_1, e_2, e_3)$
  such that $\monelt = x_1^{e_1} x_2^{e_2} x_3^{e_3}$.
  Let us consider another monomial $\monelt[n]$ defined by its exponents $(f_1, f_2, f_3)$.
  Then, we have:
  \begin{itemize}
    \item $\monelt \divleq \monelt[n]$ if and only if 
      $e_i \leq f_i$ for all $i \in \set{1,2,3}$,
    \item $\monelt \revlexleq \monelt[n]$ if and only if
      \textbf{todo}
    \item $\monelt \lexleq \monelt[n]$ if and only if
      \textbf{todo}
  \end{itemize}
\end{example}

\AP Having fixed a total ordering $\monord$ on monomials, we can define the
\intro{leading monomial} of a polynomial $p$ as the largest monomial appearing
in $p$ with respect to $\monord$. We can then define the \intro{leading term}
of $p$ as the product of its \kl{leading monomial} and its \intro{leading
coefficient}, and the \intro{characteristic monomial} of $p$ as the product of
its \kl{leading monomial} and all the indeterminates appearing in $p$.

\begin{example}
  todo
\end{example}

\AP
We can now compare polynomials with respect to their \kl{leading monomial}:
$p \pmonleq q$ if and only if their \kl{leading monomials}
$\lm(p)$ and $\lm(q)$ satisfy $\lm(p) \monord \lm(q)$.
Note that because there are finitely many indeterminates,
$\monord$ is \kl{well-founded} and therefore $\pmonleq$
is \kl{well-quasi-ordered}.
The core of the Buchberger algorithm is to start from a generating
set $H$ of an ideal $\idl$, and to saturate it into a
\kl{Gröbner basis} $\Basis$. The theory of \kl{Gröbner bases} is
stating that, given a \kl{monomial ordering} $\monord$, the following
are equivalent statements:
\begin{enumerate}
  \item The relation $\to_{\Basis,\pmonleq}$ is terminating and confluent.
  \item For every polynomial $p \in \poly{\K}{\X}$, we have
    $p \to_{\Basis,\pmonleq}^* 0$ if and only if $p \in \idl$.
  \item For every polynomial $p \in \idl$, there exists a polynomial $q \in \Basis$ such that
    $\lm(q) \divleq \lm(p)$.
  \item For every two polynomials 
    $p,q \in \Basis$,
    coefficients $a,b \in \K$ and monomials $\monelt,\monelt[n] \in \mon{\X}$, we have
    \begin{align*}
      a \monelt p + b \monelt[n] q & \to_{\Basis,\pmonleq}^* 0
    \end{align*}
\end{enumerate}
The Buchberger algorithm consists of
saturating a generating set $H$ of an ideal $\idl$ into a \kl{Gröbner basis} $\Basis$ by
adding the \kl{critical pairs} of the polynomials in $\Basis$.
Correctness is ensured by the last item, and termination is ensured by the first item,
because the ordering $\pmonleq$ is a \kl{well-quasi-ordering} on polynomials.

\paragraph{Equivariant Gröbner bases.}
\AP
When adapting the above theory to the equivariant setting, one faces
several challenges. First, the lexicographic orderings are not well founded
anymore. Second, the equivalent notions of 
\kl{Gröbner bases} are not so clearly equivalent anymore.

\begin{example}
  example of infinite reduction if one uses the revlex ordering 
\end{example}
