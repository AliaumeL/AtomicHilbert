% LTeX: language=en
%!TEX root = ../atomic.sigconf.tex
%
\section{Closure properties}
\label{sec:closure-properties}

In this section, we are interested in listing the operations on sets of
indeterminates equipped with a group action that preserve our \kl{computability
assumptions} and the \kl{well-quasi-ordering} property ensuring that our
\cref{thm:compute-egb} can be applied.  Indeed, it is often tedious to prove
that a given group action $\grp[G] \actson \X$ satisfies the \kl{computability
assumptions} and the \kl{well-quasi-ordering} property, and we aim to provide a
list of operations that preserve these properties, so that simpler examples
(\cref{ex:dlo,ex:eq atoms,ex:dense tree}) can serve as building blocks to model
complex systems.

For the remainder of this section, we fix a pair of group actions $\grp[H]
\actson \X$ and $\grp[G] \actson \Y$, where $\X$ is equipped with a total order
$<_{\X}$ and $\Y$ is equipped with a total order $<_{\Y}$. The constructions
that what we mention in this section were already studied in \cite{GHOLAS24},
via \cite[Example 10]{GHOLAS24} or \cite[Lemma 9]{GHOLAS24}, and 
our contribution is to prove that they also preserve our 
\kl{computability assumptions}.


\begin{definition}[Sum action]\label{def:union}
  Given $(\gelem[\pi], \gelem[\sigma]) \in \grp[G] \times \grp[H]$ 
  and $z \in \X \ordplus \Y$, we define the action
  $(\gelem[\pi], \gelem[\sigma])(z)$ as
  $\gelem[\pi](z)$ if $z \in \X$ and $\gelem[\sigma](z)$ if $z \in \Y$.
  This action is called the \intro{sum action} of $\grp[G]$ and $\grp[H]$ on $\X \ordplus \Y$.
\end{definition}

\begin{definition}[Product action]\label{def:product}
  Given $(\gelem[\pi], \gelem[\sigma]) \in \grp[G] \times \grp[H]$ and $(x,y) \in \X \ordtimes \Y$, we define the \intro{product action} of $\grp[G]$ and $\grp[H]$ on $\X \ordtimes \Y$ as
  $(\gelem[\pi], \gelem[\sigma])\cdot (x,y)$ as $(\gelem[\pi](x), \gelem[\sigma](y))$.
  Note that the ordering of $\X \ordtimes \Y$ is preserved by this action.
\end{definition}

\begin{definition}[Lex. Product Action]\label{def:nested product}
  Let $\grp[G] \intro*\lexGroupAction \grp[H]$ be the group whose elements are of the form 
  $(\gelem,\seqof{\gelem[\sigma]^{x}}[x\in\X])$, where 
  $\gelem[\sigma]_{x} \in \grp[H]$ for every $x\in\X$, and where the multiplication
  is defined as 
  $(\gelem_1,(\gelem[\sigma]_1^{x})_{x\in\X})(\gelem_2,(\gelem[\sigma]_2^{x})_{x\in\X})
  = (\gelem_1\gelem_2, (\gelem[\sigma]_1^{\gelem_2(x)}\gelem[\sigma]_2^x)_{x\in\X})$.
  The \intro{lexicographic product action} of $\grp[G]$ and $\grp[H]$ on $\X \ordtimes \Y$ is defined as
  $\grp[G] \lexGroupAction \grp[H]$ on $\X \ordtimes \Y$ is defined as
  $(\gelem,(\gelem[\sigma]^{x})_{x\in\X})\cdot(x',y') = 
  (\gelem\cdot x', \gelem[\sigma]^{x'}\cdot y')$ for every $(x',y')\in\X \ordtimes \Y$.
Essentially,
each element $x\in\X$ carries its own copy $\{x\}\times\Y$ of the structure $\Y$,
and different copies of the structure $\Y$ can be permuted independently.
\end{definition}

\begin{lemma}\label{lem:closure-properties-wqo}
If $(\mon[Q]{\X}, \gdivleq[\grp[G]])$ and $(\mon[Q]{\Y}, \gdivleq[\grp[H]])$
are \kl{WQOs},
then $(\mon[Q]{\X \ordplus \Y}, \gdivleq[\grp[G] \times \grp[H]])$
and $(\mon[Q]{\X\times\Y}, \gdivleq[\grp[G]\otimes\grp[H]])$ are
also \kl{WQOs}.
\end{lemma}

\begin{proof}
The \kl{divisibility up to $\grp[G] \times \grp[H]$} order is essentially the product of the orders $\gdivleq[\grp[G]]$ and $\gdivleq[\grp[H]]$,
hence is a \kl{WQO} if both orders are \kl{WQOs} \cite[Lemma 1.5]{SCSC17}.
For, $(\mon[Q]{\X\times\Y}, \gdivleq[\G\otimes\calH])$
it follows from \cite[Lemma 9]{GHOLAS24}.
\end{proof}

\begin{lemma}\label{lem:product-not-wqo}
  When $\X$ and $\Y$ are infinite,
  $(\mon[Q]{\X \ordtimes \Y}, \gdivleq[\grp[G] \times \grp[H]])$
  is not a \kl{WQO}, even with $Q = \set{0,1}$.
\end{lemma}
\begin{proof}
We restate the antichain given in \cite[Example 10]{GHOLAS24},
that will also be used is \cref{rem:multiple-orbits} of \cref{sec:undecidability}
when discussing the undecidability of the \kl{equivariant ideal membership problem}.
Let $\{x_1,x_2,\dots\}$ and $\{y_1,y_2,\dots\}$ be infinite subsets of $\X$ and $\Y$ respectively.
For $n = 3,4,\dots$, let $\monelt{c}_n$ be the monomial
\[
\monelt[c]_n = (x_1,y_1)(x_1,y_2)(x_2,y_2)(x_2,y_3)\cdots(x_n,y_n)(x_n,y_1) \ .
\]
Then $\setof{\monelt[c]_n}{n = 3,4,\dots}$ is an infinite antichain.
\end{proof}

\begin{lemma}\label{lem:closure-properties-comp}
If $\grp[G]\actson\X$ and $\grp[H]\actson\Y$ satisfy our \kl{computability assumptions},
then so do $(\grp[G] \times \grp[H])\actson (\X \ordplus \Y)$ and $(\grp[G] \otimes \grp[H])\actson (\X \times \Y)$.
\end{lemma}
\begin{proof}
  Let us first check that the actions are \kl{effectively oligomorphic}.
  \todo[inline]{\textbf{for arka}: do it?}

  It is an easy check that the actions defined are all \kl(ord){compatible}
  with the total ordering on the set of indeterminates.
  Let us now sketch the proof that points (2) and (3) of our
  \kl{computability assumptions} hold for the action $(\grp[G] \times \grp[H])\actson (\X \ordplus \Y)$,
  the proof being similar for $(\grp[G] \otimes \grp[H])\actson (\X \times \Y)$.
  We represent elements of $\X \ordplus \Y$ as elements of a tagged union,
  and given a word $w \in (\X \ordplus \Y)^*$, we can 
  create three words: one $w_\X$ in $\X^*$, one $w_\Y$ in $\Y^*$, and one $w_\text{tag}$ in $\set{ 0, 1 }^*$,
  obtained by considering respectively only the elements of $\X$,
  only the elements of $\Y$, and restricting the elements of $\X \ordplus \Y$ to whether 
  or not they belong to $\X$.
  It is an easy check that two words $u,v$ are in the same orbit if and only if
  their $u_\X$ and $v_\X$ are in the same orbit under $\grp[G]$,
  their $u_\Y$ and $v_\Y$ are in the same orbit under $\grp[H]$, and their $u_\text{tag}$ and $v_\text{tag}$ are equal.

  To list representatives of the orbits in $(\X \ordplus \Y)^n$ for a fixed 
  $n \in \N$, we can list representatives $u_\X$ of the orbits in $\X^{\leq n}$,
  representatives $u_\Y$  of the orbits in $\Y^{\leq n}$,
  and words $u_\text{tag} \in \set{0,1}^n$, and consider triples
  $(u_\X, u_\Y, u_\text{tag})$ such that $|u_\X| + |u_\Y| = n$,
  $|u_\text{tag}|_0 = |u_\X|$, and $|u_\text{tag}|_1 = |u_\Y|$.
\end{proof}
%
\section{Applications}
\label{sec:applications}

\paragraph{Polynomial computations.} \AP The fact that (finite control) systems
performing polynomial computations can be verified follows from the theory of
\kl{Gröbner bases} on finitely many indeterminates \cite{MULSEI02,BEDUSHWO17}.
There were also numerous applications to automata theory, such as deciding
whether a weighted automaton could be determinised (resp. desambiguated)
\cite{BESM23,PUSM24}. We refer the readers to a nice survey recapitulating the
successes of the ``Hilbert method'' automata theory \cite{BOJAN19}. A natural
consequence of the effective computations of \kl{equivariant Gröbner bases} is
that one can apply the same decision techniques to \emph{orbit finite
polynomial computations}. For simplicity and clarity, we will focus on
\kl{polynomial automata} without states or zero-tests \cite{BEDUSHWO17}, but
the same reasoning would apply to more general systems as we will discuss in
\cref{rem:topological-wsts}.


\AP Before discussing the case of orbit finite polynomial automata, let us
recall the setting of \kl{polynomial automata} in the classical case, as
studied by \cite{BEDUSHWO17}, with techniques that dates back to
\cite{MULSEI02}. A \intro{polynomial automaton} is a tuple $A \defined (Q,
\Sigma, \delta, q_0, F)$, where $Q = \K^n$ for some finite $n \in \N$, $\Sigma$
is a finite alphabet, $\delta \colon Q \times \Sigma \to Q$ is a transition
function such that $\delta(\cdot,a)_i$ is a polynomial in the indeterminates
$q_1, \dots, q_n$ for every $a \in \Sigma$ and every $i \in \set{1, \dots, n}$,
$q_0 \in Q$ is the initial state, and $F \colon Q \to \K$ is a polynomial
function describing the final result of the automaton. The \intro{zeroness
problem for polynomial automata} is the following decision problem: given a
\kl{polynomial automaton} $A$, is it true that for all words $w \in \Sigma^*$,
the polynomial $F(\delta^*(q_0, w))$ is zero? It is known that the \kl{zeroness
problem for polynomial automata} is decidable \cite{BEDUSHWO17}, using the
theory of \kl{Gröbner bases} on finitely many indeterminates. 


\newcommand{\toequiv}{\stackrel{\text{\tiny{eq}}}{\to}}

\AP Let us now propose a new model of computation called \kl{orbit finite
polynomial automata}, and prove an analogue decidability result. Let us fix an
\kl{effectively oligomorphic} action $\group \actson \Indets$, such that there
exists finitely many indeterminates $V \subfin \Indets$ such that $\group$ acts
as the identity on $V$. Given such a function $f \colon \Indets \to \K$, and
given a polynomial $p \in \poly{\K}{\Indets}$, we write $p(f)$ for the
evaluation of $p$ on $f$, that belongs to $\K$. Let us emphasis that the model
is purposely designed to be simple and illustrate the usage of \kl{equivariant
Gröbner bases}, and not meant to be a fully-fledged model of computation.

\begin{definition}
  \label{def:orbit-finite-polynomial-automaton}
  An \intro{orbit finite polynomial
  automaton} over $\K$ and $\Indets$ 
  is a tuple $A \defined (Q, \delta, q_0, F)$, where $Q =
  \Indets \to \K$, $q_0 \in Q$ is a function that is non-zero for finitely
  many indeterminates, $\delta \colon
  \Indets \times \Indets \toequiv \poly{\K}{\Indets}$ 
  is a
  polynomial update function, and $F \in \poly{\K}{V}$ is a polynomial 
  computing the result of the automaton. 

  Given a letter $a \in \Indets$ and a
  state $q \in Q$, the updated state $\delta^*(a,q)  \in Q$ is defined as the function from
  $\Indets$ to $\K$ defined by $\delta^*(a,q) \colon x \mapsto \delta(a,x)( q )$.
  The update function is naturally extended to words. Finally, the
  output of an \kl{orbit finite polynomial automaton} on a word $w \in \Indets^*$
  is defined as $F(\delta^*(w,q_0))$.
\end{definition}

\AP \kl{Orbit finite polynomial automata} can be used to model programs that
read a string $w \in \Indets^*$ from left to right, having as internal state a
dictionary of type \texttt{dict[indet, number]}, which is updated using
polynomial computations. As for \kl{polynomial automata}, the
\intro(ofpa){zeroness problem} for orbit finite polynomial automata is the
following decision problem: decide if for every input word $w$, the output
$F(\delta^*(w, q_0))$ is zero.



The \kl{orbit finite polynomial automata} model could be extended to allow for
inputs of the form $\Indets^k$ for some $k \in \N$, or even be recast in the
theory of nominal sets \cite{BOJAN16inf}. Furthermore, leveraging the closure
properties of \cref{lem:closure-properties-comp,lem:closure-properties-wqo},
one can also reduce the equivalence problem for \kl{orbit finite polynomial
automata} to the \kl(ofpa){zeroness problem}, by considering the \kl{sum
action} on the registers to compute the difference of the two results. We leave
a more detailed investigation of the generalisation of \kl{polynomial automata}
to the orbit finite setting for future work.


\begin{remark}
  \label{rem:topological-wsts}
  The proof of \cref{cor:orbit-finite-polynomial-automata-zeroness} can be
  recast in the more general setting of 
  \intro{topological well-structured transition system}, that were introduced by
  Goubault-Larrecq in \cite{JGL07}, who noticed that the pre-existing notion of
  \emph{Noetherian space} could serve as a topological generalisation of
  \kl{Noetherian rings} (where ideal-based method can be applied),
  and 
  \kl{well-quasi-orderings}, for which the celebrated decision procedures on
  \emph{well-structured transition systems} can be applied \cite{ABDU96}. In particular,
  Goubault-Larrecq used such systems to verify properties of \emph{polynomial
  programs} computing over the complex numbers, that can communicate over lossy
  channels using a finite alphabet \cite{JGL10}. 
  Because of \cref{cor:equivariant-ideals-computations}, we do have an 
  effective way to compute on the topological spaces at hand, 
  and therefore we can apply the theory of
  \kl{topological well-structured transition systems} to verify systems
  such as \emph{orbit finite polynomial automata communicating using a finite alphabet
  over lossy channels}.
  We refer to \cite[Chapter 9]{JGL13} for a survey on the theory of 
  Noetherian spaces.
\end{remark}


\paragraph{Reachability problem of symmetric data Petri nets.} The classical
model of Petri nets was extended to account for arbitrary data attached to
tokens to form what is called data Petri nets. We will not discuss the precise
definitions of these models, but point out  that a reversible data Petri net is
exactly what is called a \kl{monomial rewriting system} \cite[Section
8]{GHOLAS24}. Because reachability in such rewriting systems can be decided
using \kl{equivariant ideal membership} queries \cite[Theorem 64]{GHOLAS24}, we
can use \cref{thm:compute-egb}
 and \cref{lem:reducts-equiv-hilbert} to show
\cref{cor:rev data VAS}.
Note that \kl{monomial rewrite systems} will be at the
center of our undecidability results in \cref{sec:undecidability}.

\csname cor:rev-data-VAS\endcsname*



\paragraph{Orbit-finite systems of equations} The classical theory of solving
finite systems of linear equations has been generalised to the infinite setting
by \cite{GHL22}, \cite[Section 9]{GHOLAS24}. In this setting, one considers an
\kl{effectively oligomorphic} group action $\group\actson\Indets$, and the
vector space $\lin(\Indets^n)$ generated by the indeterminates $\Indets^n$ over
$\K$. An orbit-finite system of equations asks whether a given vector $u \in
\lin(\Indets^n)$ is in the vector space generated by an \kl{orbit-finite} set
of vectors $V$ in $\lin(\Indets^n)$ \cite[Section 9]{GHOLAS24}. It has been
shown that the solvability of these systems of equations reduces to the
\kl{equivariant ideal membership problem} \cite[Theorem 68]{GHOLAS24}, and as a
consequence of this reduction and
\Cref{thm:compute-egb,lem:reducts-equiv-hilbert} we get that:


\csname cor:lin-solv\endcsname*

Note that the above corollary is an extension of
\cite[Theorem 6.1]{GHL22} to all nicely orderable group actions.



\subsection{Reducts} 

\todo[inline]{\textbf{for arka}: 
this section is non-sensical: we are saying that things are gröbner bases 
without having an ordering. This needs to be fixed, for instance 
by saying that \cref{cor:equivariant-ideals-computations}
lifts to this setting via the reduct, but without mentioning gröbner bases.
}

\AP As mentioned in the introduction, some examples of
group actions $\group\actson\Indets$ do not preserve a linear order on
$\Indets$, such as the set $\EqualityAtoms$ of indistinguishable names without
any relations. However, there are techniques that allow us to reduce the
problem of computing \kl{equivariant Gröbner bases} to the case where the
action preserves a linear ordering, using what is called a \kl{reduct} of the
action. A group action $\group\actson\Indets$ is said to be a \intro{reduct} of
another group action $\calH\actson\Y$ if there exists a bijection $f \colon
\Indets\to\Y$ such that $f^{-1}\circ \gelem \circ f \in\group$ for every
$\gelem \in \calH$. It is called an \intro{effective reduct} if $f$ is
computable.

\begin{lemma}\label{lem:reducts-equiv-hilbert}
  Let $\group\actson\Indets$ be an \kl{effective reduct} of $\calH\actson\Y$ 
  via a computable function $f\colon\Indets\to\Y$. Then,
  \begin{enumerate}
    \item for every $\group$-equivariant ideal $\idl[I]\subseteq\poly{\K}{\X}$,
    $f(\idl[I])\subseteq\poly{\K}{\Y}$ is a $\calH$-equivariant ideal,
    \item if $\Basis\subseteq\poly{\K}{\Y}$ is a $\calH$-equivariant Gr\"{o}bner basis then \\$\orbit[\group]{f^{-1}(\Basis)}$ is a $\group$-equivariant Gr\"{o}bner basis.
  \end{enumerate}
\end{lemma}

\AP We say that an action $\group\actson\Indets$ is \intro{nicely orderable} if
it is an \kl{effective reduct} of some  \kl{effectively oligomorphic} action
$\calH\actson\Y$ that satisfies the conditions mentioned in
\Cref{thm:compute-egb},
i.e.\ $\calH\actson\Y$ preserves an effective linear order and
$\gdivleq[\calH]$ is a \kl{WQO}. As an immediate corollary of
\Cref{thm:compute-egb},
\Cref{lem:reducts-equiv-hilbert} we get the desired \cref{cor:egb}.
  
\begin{corollary}\label{cor:egb} If $\group\actson\Indets$ is
  \kl{nicely orderable} then
  one can compute an \kl{equivariant Gröbner basis} of any 
  \kl{equivariant ideal} given by an \kl{orbit finite} set of
  generators.
\end{corollary}

\begin{remark}\label{rem:reduct}

\Cref{lem:reducts-equiv-hilbert} implies that one can apply our
results to an action $\group\actson\Indets$ that does not preserve a linear
order, as soon as it is  a reduct of some another action $\calH\actson\Indets$ which
does preserves a linear order. 

For example, $\aut{\EqualityAtoms}\actson\EqualityAtoms$ is a \kl{reduct} of
$\aut{\OrderAtoms}\actson\OrderAtoms$ assuming $\EqualityAtoms$ is countable.
Similarly, let $\T_<$ be the countable dense-meet tree with a lexicographic
ordering, as defined in \cite[Remark 6.14]{KRS21}.\footnote{The remark says
that finite meet-trees expanded with a lexicographic ordering is a Fra\"{i}sse
class, from which it follows that there exists a Fra\"{i}sse limit $\T_<$ for
that class.} Let $\group$ be the group of bijections of $\T_<$ which do not
necessarily preserve the lexicographic ordering. Then $\group\actson\T_<$ is
isomorphic to $\aut{\TreeAtoms}\actson\TreeAtoms$, and hence
$\aut{\TreeAtoms}\actson\TreeAtoms$ is a reduct of $\aut{\T_<}\actson\T_<$.
\end{remark}